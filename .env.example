# ==========================================
# FaithTracker Environment Configuration
# ==========================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# ==========================================
# DOMAIN CONFIGURATION
# ==========================================
# Your main domain (without https://)
# Frontend: https://DOMAIN
# Backend API: https://api.DOMAIN
DOMAIN="faithtracker.example.com"

# Email for Let's Encrypt SSL certificates (used by Certbot)
ACME_EMAIL="admin@example.com"

# ==========================================
# DOCKER CONFIGURATION
# ==========================================
# MongoDB credentials
MONGO_ROOT_USERNAME="admin"
MONGO_ROOT_PASSWORD="your-secure-mongodb-password-here"

# ==========================================
# DATABASE CONFIGURATION (Manual mode only)
# ==========================================
# MongoDB Connection (for non-Docker deployment)
# Format: mongodb://[username:password@]host[:port]/database
# MONGODB_URI="mongodb://localhost:27017/faithtracker"

# ==========================================
# ENVIRONMENT MODE
# ==========================================
# Set to "production" for production deployments
# In production, stricter security rules apply:
# - JWT_SECRET and ENCRYPTION_KEY are required (no auto-generation)
# - CORS must be explicitly configured (no wildcard)
# - Error messages are generic (no stack traces exposed)
ENVIRONMENT="development"

# ==========================================
# SECURITY KEYS (Required for both modes)
# ==========================================
# JWT secret for authentication (REQUIRED in production)
# Generate with: openssl rand -hex 32
JWT_SECRET="your-jwt-secret-key-here-MUST-BE-CHANGED"

# Fernet encryption key for sensitive data (REQUIRED in production)
# Generate with: python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY="generate-with-command-above"

# ==========================================
# CORS CONFIGURATION (REQUIRED in production)
# ==========================================
# Comma-separated list of allowed origins for CORS
# Example: https://faithtracker.example.com,https://admin.faithtracker.example.com
# In development, localhost:3000 and localhost:8001 are allowed by default
ALLOWED_ORIGINS="https://faithtracker.example.com"

# ==========================================
# FRONTEND CONFIGURATION
# ==========================================
# Backend API URL (automatically set in Docker mode)
# For Docker: https://api.DOMAIN (set automatically)
# For Manual: https://api.yourdomain.com
REACT_APP_BACKEND_URL="https://api.faithtracker.example.com"

# ==========================================
# OPTIONAL INTEGRATIONS
# ==========================================
# WhatsApp Gateway is now configured via the Settings page in the app
# Go to Settings > Automation to configure your WhatsApp gateway URL
# The gateway should accept POST /send/message with {phone, message}

# ==========================================
# INITIAL SETUP (First deployment only)
# ==========================================
# These are used to create the initial admin user on first startup
# ADMIN_PASSWORD must be at least 12 characters for security
ADMIN_EMAIL="admin@yourchurch.org"
ADMIN_PASSWORD="your-secure-admin-password-min-12-chars"
ADMIN_PHONE="6281234567890"
CHURCH_NAME="Your Church Name"

# ==========================================
# IMPORTANT NOTES
# ==========================================
# 1. NEVER commit .env with real credentials to version control
# 2. Generate strong, unique secrets for production
# 3. Keep JWT_SECRET secure and never share it
# 4. Required variables for Docker deployment:
#    - DOMAIN
#    - ACME_EMAIL
#    - MONGO_ROOT_PASSWORD
#    - JWT_SECRET
#    - ENCRYPTION_KEY
#
# Architecture:
#   - Angie (nginx fork) runs at HOST level as reverse proxy
#   - All application services run in Docker containers
#   - Angie handles SSL, rate limiting, and security headers
#
# Quick Start:
#   1. Copy this file to .env and fill in values
#   2. Run: make angie-install   (install Angie)
#   3. Run: make ssl-setup       (get SSL certificates)
#   4. Run: make up              (start Docker services)
